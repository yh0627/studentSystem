<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="./js/jquery-3.3.1.min.js"></script>
<style>
    .content {
        width: 600px;
        height: 400px;
        border: 1px solid #ccc;
        border-radius: 6px;
        overflow: auto;
    }
    .loading {
        position: absolute;
        top: 50px;
        left: -75px;
        margin-left: 50%;
    }
</style>
<body>
    <input class="song-id" type="text" value="28012022" placeholder="请输入歌曲id"><br>
    <label for="song">歌曲<input id="song" name="detail" type="radio" value="song"></label><br>
    <label for="lyric">歌词<input id="lyric" name="detail" type="radio" value="lyric"></label><br>
    <label for="comments">评论<input id="comments" name="detail" type="radio" value="comments"></label><br>
    <label for="detail">详情<input id="detail" name="detail" type="radio" value="detail"></label><br>
    <button class="btn">查看</button>
    <p class="content">
        <img class="loading" width="150px" height="150px" src="./image/loading.gif" alt="">
    </p>
    <script>
        $(function() {
            $('.btn').click(function(){
                //显示loading的图标
                $('.loading').toggle();
                var url = 'https://api.imjad.cn/cloudmusic/?type=song&id=28012031&br=128000';
                var id = $('.song-id').val()
                var type = $('input[type=radio]:checked').val()
                $.ajax({
                    url:`https://api.imjad.cn/cloudmusic/`,
                    method:'GET',
                    //拼接数据，注意使用ES6的写法
                    data: {
                        type:type,
                        id,
                        br:'128000'
                    },
                    success:function(data) {
                        //隐藏loading的图标
                        $('.loading').toggle();
                        var text = ''
                        //根据用户选择，显示不同的类型数据
                        if(type == 'lyric') {
                            text = data.tlyric.lyric
                        }else if(type == 'song') {
                            text = `下载地址:<a href=${data.data[0].url} target=_blank>点击下载</a>`
                        }else if(type == 'detail'){
                            text = `专辑名称：${data.songs[0].alia}<br>歌手：${data.songs[0].ar[0].name}<br>
                            <img src=${data.songs[0].al.picUrl}>`
                        }
                        $('.content').html(text)
                    }
                })
            })
        })
    </script>
</body>
</html>